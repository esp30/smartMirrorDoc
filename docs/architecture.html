<!DOCTYPE HTML>
<html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no">

    <!-- Page Info -->
    <title>Architecture | Smart Mirror </title>

    <!-- Social tags -->
    <meta name="keywords" content="">
    <meta name="description" content="Make your life easier">
    
    <!-- Fonts and icons -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">

    <!-- CSS Files -->
    <link href="assets/css/material-kit.css?v=2.0.5" rel="stylesheet">
          
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon//favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon//favicon-16x16.png">
    <link rel="manifest" href="assets/images/favicon//site.webmanifest">
    <link rel="mask-icon" href="assets/images/favicon//safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    
  </head>

<body data-spy="scroll" data-target="#toc">
  <!-- Navbar  -->
  <nav class="navbar navbar-color-on-scroll navbar-transparent fixed-top navbar-expand-lg" color-on-scroll="100">
      <div class="container">
        <div class="navbar-translate">
          <!-- Begin Logo -->
          <a class="navbar-brand" href="https://esp30.github.io/smartMirrorDoc/">
            <!-- <img src="assets/images/logo/logo.png" alt="">  -->
            <i class="material-icons">video_label</i> Smart Mirror 
          </a>
          <!-- End Logo -->
          
          <!-- Mobile -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon"></span>
            <span class="navbar-toggler-icon"></span>
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ml-auto">
            <!-- Getting Started -->
            
            <li class="nav-item dropdown">
            
              <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                <i class="material-icons">explore</i> Getting Started
              </a>
              <div class="ripple-container"></div></a>
              <div class="dropdown-menu dropdown-with-icons">
<!--                 <a href="https://esp30.github.io/smartMirrorDoc/client.html" class="dropdown-item">
                  <i class="material-icons">explore</i> Getting Started
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/features.html" class="dropdown-item">
                  <i class="material-icons">toc</i> Features
                </a> -->
                <a href="https://esp30.github.io/smartMirrorDoc/getting-started.html" class="dropdown-item">
                  <i class="material-icons">person</i> Personas + Scenarios
                </a>
              </div>
            </li>
            
            <!-- The System -->            
             
            <li class="active nav-item dropdown">
            
              <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                <i class="material-icons">build</i> The System
              <div class="ripple-container"></div></a>
              <div class="dropdown-menu dropdown-with-icons">
                <a href="https://esp30.github.io/smartMirrorDoc/architecture.html" class="dropdown-item">
                  <i class="material-icons">dns</i> Architecture
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/developers.html" class="dropdown-item">
                  <i class="material-icons">book</i> For Developers
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/operators.html" class="dropdown-item">
                  <i class="material-icons">construction</i> For Operators
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/tests.html" class="dropdown-item">
                  <i class="material-icons">assignment_turned_in</i> Testing
                </a>
              </div>
            </li>

                    
            <!-- Team -->
            
            <li class="nav-item">
            
              <a href="https://esp30.github.io/smartMirrorDoc/team.html" class="nav-link">
                <i class="material-icons">supervisor_account</i> Team and Conclusions
              </a>
            </li>
           
          </ul>
        </div>
      </div>
    </nav>

  <!-- Content -->
  <!-- Header -->

<div class="page-header header-filter clear-filter purple-filter" data-parallax="true" style=" background: rgb(25, 39, 160); height: 500px; background-image: url('assets/images/developers.jpg'); background-position: center; ">

  <div class="container">
    <div class="row">
      <div class="col-md-8 ml-auto mr-auto">
        <div class="brand text-center">
          <h1 data-toc-skip>Architecture</h1>
          <h3 class="title text-center" data-toc-skip> Conceptual blocks and implementation. Message and data models </h3>
          
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Content -->
<div class="main main-raised">
  <div class="container">
    <div class="section">
      <div class="row">
        
        <div class="col">
            <h5 data-toc-skip>Table of Contents</h5>
            <nav id="toc" data-toggle="toc" class="sticky-top"></nav>
          </div>
          
          <div id="content" class="col-lg-10">
              <div id="diagram">
    <div class="title">
    <h2>System Architecture</h2>
    </div>

    <img class="center" src="assets/images/architecture.png" alt="Project Architecture Diagram" style="max-width:100%;
    max-height:100%;"></img>
    <p class="text-muted" style="text-align: center">
        SmartMirror Detailed Architecture Diagram
    </p>
</div>

<div id="details">
    <div class="title">
        <h2>Implementation</h2>
        <h4>The described technologies are the <b>currently used</b> technologies for each block of our system</h4>
    </div>

    <!--Table-->
    <table id="tablePreview" class="table" style="table-layout:fixed">
        <!--Table head-->
        <thead>
        <tr>
            <th>Category</th>
            <th>Component</th>
            <th>Techonologies/Devices</th>
            <th>Purpose</th>
        </tr>
        </thead>
        
        <tbody>
            
            <tr>
                <th scope="row">TBA</th>
                <td>TBA </td>
                <td>TBA<br> </td>
                <td>TBA </td>
            </tr>
            
            <tr>
                <th scope="row"></th>
                <td>TBA </td>
                <td>TBA </td>
                <td>TBA </td>
            </tr>
            
        </tbody>
    </table>
    
</div>

<div id="details">
    <div class="title">
        <h2>Message and data models</h2>
        <h4>Data flow on the system and format of the messages</h4>
    </div>
    
    <h5>On the flow of data and usage of Kafka</h5>
    The <b>main stream of data is exchanged between</b> our two main services: <b>the core application and the emotion detection module</b>. This communication is achieved <b>through a Kafka Broker</b> already deployed. <br>
    The messages are exchanged between <b>two main topics: “p30-photos” and “p30-classification”.</b>
    
    <h5>Data structure</h5>
    Since we are essentially dealing with a proof of concept system, and we don’t actually have strict guidelines on how data should look like or even flow, <b>the decision was to stick with a simple data structure.</b> <br><br>
    
    The message structure always follows a JSON like format:
    <ul>
        <li>For the first mentioned topic (<b>“p30-photos”</b>), we are essentially encoding the image taken as a photo in the main application, encoding it as a base 64 string, and building a JSON object as following before sending it to the “p30-photos” topic: <br>

        <code class="language-json">p30-photos-json = {id: UNIQUE_IDENTIFIER, image: “data:image/png;base64, iVBORw…”}</code></li><br>

        <li>The classification topic (<b>“p30-classification”</b>) aims to answer this first topic information. This is, the core application sends the previously shown JSON message to the corresponding topic read by the emotion detection module, and this last should parse the information, compute the necessary information and respond with a similar message to the emote classification topic. The information structure is, once again, similar to the previously shown: <br>

        <code class="language-json">p30-classification-json = {id: UNIQUE_IDENTIFIER, emote: “happy”}</code><br><br>
        
        The desired information, in this case the <b>computed emotion, is then displayed in the front-end section of the core application</b> giving the user the ability to understand what is being sent to the main application endpoints, and ultimately, regarding the doctor scenarios, his doctor or therapist.<br><br>

        <li>It’s also worth mentioning that the “p30-classification” topic is listened by the application <b>database</b> controller where the information is saved. The main idea is that the application endpoint reads the stored information before returning it, making information consistent in the database as well as maintaining parsed and structured data before being made available in the main endpoints.
        Each entry on the database has the following structure: <br>
            
        <code>id: integer | timestamp: integer | user: string | value: string</code></li>

    </ul>
</div>
    
        
        

              
              <br>
              <a class="sidebar-nav-item" href="#" data-proofer-ignore><h5 data-toc-skip><i class="material-icons">arrow_upward</i> Return to Top</h5></a>
          </div>
           
      </div> 
    </div>
  </div>
</div>
 
  
  <!-- Footer -->
  <footer class="footer footer-default">
    <div class="container">
      <nav class="float-left">
        <ul>
          <li>
            <a> Smart Mirror - Make your life easier</a>
          </li>
        </ul>
      </nav>
      <div class="copyright float-right">
        &copy;
        <script>
          document.write(new Date().getFullYear())
        </script>, made with <i class="material-icons">favorite</i> by
        Jorge, Marcelo, Fabio, Paulo, Pedro.
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!--   Core JS Files   -->
  <script src="./assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
  <script src="./assets/js/plugins/moment.min.js"></script>
  <!--	Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
  <script src="./assets/js/plugins/bootstrap-datetimepicker.js" type="text/javascript"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="./assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDGat1sgDZ-3y6fFe6HD7QUziVC6jlJNog"></script>
  <!--	Plugin for Sharrre btn -->
  <script src="./assets/js/plugins/jquery.sharrre.js" type="text/javascript"></script>
  <!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
  <script src="./assets/js/material-kit.min.js?v=2.0.5" type="text/javascript"></script>
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  
  <!-- TOC -->
  <!-- add after bootstrap.min.css -->
  <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
  <!-- add after bootstrap.min.js -->
  <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script>

  <!-- Tooltips -->
  <script>
  $('a[data-toggle="tooltip"]').tooltip({
    animated: 'fade',
    placement: 'bottom',
    html: true
  });
  </script>
</body>

</html>
