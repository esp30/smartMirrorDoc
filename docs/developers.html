<!DOCTYPE HTML>
<html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no">

    <!-- Page Info -->
    <title>For Developers | Smart Mirror </title>

    <!-- Social tags -->
    <meta name="keywords" content="">
    <meta name="description" content="Make your life easier">
    
    <!-- Fonts and icons -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">

    <!-- CSS Files -->
    <link href="assets/css/material-kit.css?v=2.0.5" rel="stylesheet">
          
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon//favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon//favicon-16x16.png">
    <link rel="manifest" href="assets/images/favicon//site.webmanifest">
    <link rel="mask-icon" href="assets/images/favicon//safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    
  </head>

<body data-spy="scroll" data-target="#toc">
  <!-- Navbar  -->
  <nav class="navbar navbar-color-on-scroll navbar-transparent fixed-top navbar-expand-lg" color-on-scroll="100">
      <div class="container">
        <div class="navbar-translate">
          <!-- Begin Logo -->
          <a class="navbar-brand" href="https://esp30.github.io/smartMirrorDoc/">
            <!-- <img src="assets/images/logo/logo.png" alt="">  -->
            <i class="material-icons">video_label</i> Smart Mirror 
          </a>
          <!-- End Logo -->
          
          <!-- Mobile -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon"></span>
            <span class="navbar-toggler-icon"></span>
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ml-auto">
            <!-- Getting Started -->
            
            <li class="nav-item dropdown">
            
              <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                <i class="material-icons">explore</i> Getting Started
              </a>
              <div class="ripple-container"></div></a>
              <div class="dropdown-menu dropdown-with-icons">
<!--                 <a href="https://esp30.github.io/smartMirrorDoc/client.html" class="dropdown-item">
                  <i class="material-icons">explore</i> Getting Started
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/features.html" class="dropdown-item">
                  <i class="material-icons">toc</i> Features
                </a> -->
                <a href="https://esp30.github.io/smartMirrorDoc/getting-started.html" class="dropdown-item">
                  <i class="material-icons">person</i> Personas + Scenarios
                </a>
              </div>
            </li>
            
            <!-- The System -->            
             
            <li class="active nav-item dropdown">
            
              <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                <i class="material-icons">build</i> The System
              <div class="ripple-container"></div></a>
              <div class="dropdown-menu dropdown-with-icons">
                <a href="https://esp30.github.io/smartMirrorDoc/architecture.html" class="dropdown-item">
                  <i class="material-icons">dns</i> Architecture
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/developers.html" class="dropdown-item">
                  <i class="material-icons">book</i> For Developers
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/operators.html" class="dropdown-item">
                  <i class="material-icons">construction</i> For Operators
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/tests.html" class="dropdown-item">
                  <i class="material-icons">assignment_turned_in</i> Testing
                </a>
              </div>
            </li>

                    
            <!-- Team -->
            
            <li class="nav-item">
            
              <a href="https://esp30.github.io/smartMirrorDoc/team.html" class="nav-link">
                <i class="material-icons">supervisor_account</i> Team and Conclusions
              </a>
            </li>
           
          </ul>
        </div>
      </div>
    </nav>

  <!-- Content -->
  <!-- Header -->

<div class="page-header header-filter clear-filter purple-filter" data-parallax="true" style=" background: rgb(25, 39, 160); height: 500px; background-image: url('assets/images/developers.jpg'); background-position: center; ">

  <div class="container">
    <div class="row">
      <div class="col-md-8 ml-auto mr-auto">
        <div class="brand text-center">
          <h1 data-toc-skip>For Developers</h1>
          <h3 class="title text-center" data-toc-skip> Implementation details and decisions. How to extend the existing system </h3>
          
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Content -->
<div class="main main-raised">
  <div class="container">
    <div class="section">
      <div class="row">
        
        <div class="col">
            <h5 data-toc-skip>Table of Contents</h5>
            <nav id="toc" data-toggle="toc" class="sticky-top"></nav>
          </div>
          
          <div id="content" class="col-lg-10">
              <div id="details">
    <div class="title">
        <h2>Notes on the Implementation</h2>
        <h4>Implementation details and decisions</h4>
    </div>

    <div style="text-align: center;">
    We wanted Smart Mirror to be as modular possible and our <b>microservice based architecture</b> helped us accomplish that. Except for the doctor app, the modules can be run independently. <b>The emotion detection is done in a way that could be easily implemented in other systems</b> other than Smart Mirror. <br><br>

    While we envisioned SmartMirror to be implemented on an actual mirror, <b>due to the lack of hardware, we decided for a fully digital implementation, as proof of concept.</b> <br><br>

    Due to the nature of the project, SmartMirror <b>captures both sound and image.</b> Since this is being deployed in a remote machine, we had to find a way to access the user microphone and camera. <br>
    To do so, <b>we relied on HTLM5 video tag</b>, to access the webcam and Javascript Speech Recognition library, for voice commands, effectively shifting the capturing responsibilities to the client-side browser. The downsides of this are that the Speech Recognition features only work on Chrome Browsers (at the time) and that the application can only be accessed through HTTPS. <br><br><br>
    </div>

    <div class="title">
        <h2>How it was implemented</h2>
        <h4>SmartMirror consists of 2 main modules plus a service for proof of concept of the usage of the system by third-parties:</h4>
    </div>
    <!--Table-->
    <table id="tablePreview" class="table" style="table-layout:fixed">
        <!--Table head-->
        <thead>
        <tr>
            <th>Component</th>
            <th>Technology</th>
            <th>Runtime</th>
            <th>Purpose</th>
        </tr>
        </thead>
        
        <tbody>
            
            <tr>
                <th scope="row">Core</th>
                <td>Java<br>Spring Framework </td>
                <td>Running on a docker container, with the name esp30-smartmirror, on port 30043 of 192.168.160.103. </td>
                <td>This module exposes the mirror webpage. On this page the user can take a picture, either by clicking or by voice commands. The picture is then converted to base64 on the javascript and sent via a POST request to the backend to be redirected to the emotion detection module to be processed. This module also exposes a REST API. This can be used by the doctor to check on his patients. </td>
            </tr>
            
            <tr>
                <th scope="row">Emotion Detection Module</th>
                <td>Python<br>OpenCV library </td>
                <td>Running on a docker container, with the name esp30-smartmirror-emotiondetection, on 192.168.160.103. </td>
                <td>This module receives images in Base64 via messages on a Kafka topic, and processes them. If the module can classify the emotion of the image, it replies with a JSON file containing the resulting emotion. </td>
            </tr>
            
            <tr>
                <th scope="row">Doctor application</th>
                <td>Java<br>Spring Framework </td>
                <td>Running on a docker container, with the name esp30-smartmirror-docapp, on port 30020 of 192.168.160.103. </td>
                <td>This module uses our API and shows the information it fetches in Web Page. </td>
            </tr>
            
        </tbody>
    </table>
    
    

</div>

<div id="details">
    <div class="title">
        <h2>How to extend the existing system</h2>
        <h4>Quick tutorial</h4>
    </div>
    
    To start extending SmartMirror, you should first familiarize yourself with the repository structure:
    <ul>
        <li>On the folder <code>“/src”</code> you can find the code, test and resources of the SmartMirror core. The <code>pom.xml</code> relating to this module is on the root of the project</li>
        <li>The emotion detection module source code and corresponding models are available on the folder <code>“/python_src”</code></li>
        <li>As for the Doctor App, you can find the code, resources and pom.xml on the <code>/api_microservice/api-microservice-smartMirror</code> folder.</li>
    </ul>

    Have also in mind that:
	<ul>
        <li>Each of the folders mentioned above contains a <code>Dockerfile</code> to build the corresponding docker image.</li>
        <li>Both Spring Boot apps run on the embedded Apache Tomcat server, so no additional application service (e.g Payara) is necessary but can be used if wanted by deploying the JAR file that results from running <code>mvn deploy -s settings.xml</code>.</li>
        <li>The SmartMirror core module front-end only works via HTTPS, which means the connection as to be secured with a SSL certificate. This certificate is used is kept on the resources of the module and has a password. Also due to HTTPS, the Apache Tomcat server port is configured on <code>8443</code>.</li>
        <li>The SmartMirror core app assumes there’s a MySQL database running on port <code>3307</code>, with the credentials <code>(root,password)</code>. This can be changed at any time on application.properties file.</li>
        <li>The SmartMirror core app tries to init a connection with a Kafka broker on port <code>9093</code> after accessing the Mirror page. This configuration is on the <code>WebCamController</code> and can/should be changed accordingly to your needs.</li>
		<li>The topic <code>p30-classification</code> needs to be created previously on the Kafka broker before deploying the application, or the system will not work.</li>
</div>
    
        
        

              
              <br>
              <a class="sidebar-nav-item" href="#" data-proofer-ignore><h5 data-toc-skip><i class="material-icons">arrow_upward</i> Return to Top</h5></a>
          </div>
           
      </div> 
    </div>
  </div>
</div>
 
  
  <!-- Footer -->
  <footer class="footer footer-default">
    <div class="container">
      <nav class="float-left">
        <ul>
          <li>
            <a> Smart Mirror - Make your life easier</a>
          </li>
        </ul>
      </nav>
      <div class="copyright float-right">
        &copy;
        <script>
          document.write(new Date().getFullYear())
        </script>, made with <i class="material-icons">favorite</i> by
        Jorge, Marcelo, Fabio, Paulo, Pedro.
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!--   Core JS Files   -->
  <script src="./assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
  <script src="./assets/js/plugins/moment.min.js"></script>
  <!--	Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
  <script src="./assets/js/plugins/bootstrap-datetimepicker.js" type="text/javascript"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="./assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDGat1sgDZ-3y6fFe6HD7QUziVC6jlJNog"></script>
  <!--	Plugin for Sharrre btn -->
  <script src="./assets/js/plugins/jquery.sharrre.js" type="text/javascript"></script>
  <!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
  <script src="./assets/js/material-kit.min.js?v=2.0.5" type="text/javascript"></script>
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  
  <!-- TOC -->
  <!-- add after bootstrap.min.css -->
  <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
  <!-- add after bootstrap.min.js -->
  <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script>

  <!-- Tooltips -->
  <script>
  $('a[data-toggle="tooltip"]').tooltip({
    animated: 'fade',
    placement: 'bottom',
    html: true
  });
  </script>
</body>

</html>
