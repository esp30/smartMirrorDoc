<!DOCTYPE HTML>
<html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no">

    <!-- Page Info -->
    <title>Quickstart for Developers | Smart Mirror </title>

    <!-- Social tags -->
    <meta name="keywords" content="">
    <meta name="description" content="Make your life easier">
    
    <!-- Fonts and icons -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">

    <!-- CSS Files -->
    <link href="assets/css/material-kit.css?v=2.0.5" rel="stylesheet">
          
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="assets/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="assets/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="assets/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="assets/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    
  </head>

<body data-spy="scroll" data-target="#toc">
  <!-- Navbar  -->
  <nav class="navbar navbar-color-on-scroll navbar-transparent fixed-top navbar-expand-lg" color-on-scroll="100">
      <div class="container">
        <div class="navbar-translate">
          <!-- Begin Logo -->
          <a class="navbar-brand" href="https://esp30.github.io/smartMirrorDoc/">
            <!-- <img src="assets/images/logo/logo.png" alt="">  -->
            <i class="material-icons">video_label</i> Smart Mirror 
          </a>
          <!-- End Logo -->
          
          <!-- Mobile -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon"></span>
            <span class="navbar-toggler-icon"></span>
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ml-auto">
            <!-- Getting Started -->
            
            <li class="nav-item dropdown">
            
              <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                <i class="material-icons">explore</i> Getting Started
              </a>
              <div class="ripple-container"></div></a>
              <div class="dropdown-menu dropdown-with-icons">
<!--                 <a href="https://esp30.github.io/smartMirrorDoc/client.html" class="dropdown-item">
                  <i class="material-icons">explore</i> Getting Started
                </a>
                <a href="https://esp30.github.io/smartMirrorDoc/features.html" class="dropdown-item">
                  <i class="material-icons">toc</i> Features
                </a> -->
                <a href="https://esp30.github.io/smartMirrorDoc/scenarios.html" class="dropdown-item">
                  <i class="material-icons">person</i> Personas + Scenarios
                </a>
              </div>
            </li>
            
            <!-- Development -->            
            
            <li class="nav-item">
            
              <a href="https://esp30.github.io/smartMirrorDoc/developers.html" class="nav-link">
                <i class="material-icons">book</i> Current Status
              </a>
            </li> 

                    
            <!-- Team -->
            
            <li class="nav-item">
            
              <a href="https://esp30.github.io/smartMirrorDoc/team.html" class="nav-link">
                <i class="material-icons">supervisor_account</i> Team
              </a>
            </li>

            <!-- Logbook -->
            <!-- 
            <li class="nav-item">
            
              <a href="https://esp30.github.io/smartMirrorDoc/logbook.html" class="nav-link">
                <i class="material-icons">schedule</i> Logbook
              </a>
            </li> -->

           
          </ul>
        </div>
      </div>
    </nav>

  <!-- Content -->
  <!-- Header -->

<div class="page-header header-filter clear-filter purple-filter" data-parallax="true" style=" background: rgb(25, 39, 160); height: 500px; background-image: url('assets/images/developers.jpg')" >

  <div class="container">
    <div class="row">
      <div class="col-md-8 ml-auto mr-auto">
        <div class="brand text-center">
          <h1 data-toc-skip>Quickstart for Developers</h1>
          <h3 class="title text-center" data-toc-skip> How to implement our system </h3>
          
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Content -->
<div class="main main-raised">
  <div class="container">
    <div class="section">
      <div class="row">
        
        <div class="col">
            <h5 data-toc-skip>Table of Contents</h5>
            <nav id="toc" data-toggle="toc" class="sticky-top"></nav>
          </div>
          
          <div id="content" class="col-lg-10">
              <div id="guide">
    <div class="title">
        <h2>Quickstart Deployment Guide</h2>
        Step-by-step guide on how to deploy our system, starting by the physical setup and then the required software configurations.<br>See <a href='http://xcoa.av.it.pt/~pei2018-2019_g08/architecture.html'>Architecture</a> for more details.
    </div>

    <div id="hardware">
        
        <h3>1. Physical Setup</h3>
        
        <h4>Before Starting - Required Material</h4>
            For each canteen: 
            <ul>
                <li>1 Canteen Control Unit (Raspberry Pi or any PC)</li>
            </ul>
            Per food stand (a canteen has 1 or more food stands): 
            <ul>
                <li>X Ultrasonic sensor (where X is the number of food containers)</li>
                <li>1 Card Reader</li>
                <li>1 Raspberry Pi</li>
                <li>1 Load-Cell</li>
                <li>1 HX711</li>
                <li>1 monitor</li>
            </ul>
        <h4>A. Food Stand</h4>
        In a real deployment scenario, if you're working for a canteen, you'll probably already have the food stands, but if you're trying to test our system in other contexts it might be useful an experimental food stand.<br>
        For the purpose of our project, we developed and built a food stand with a piece of wood acting as the place where the food plates are put on and boxes acting as food containers - use it as an inspiration for you.<br>
        The position of the sensors can be decided by you but have in mind the following guidelines:
        <ul>
            <li>The load cell must be protected and must be below the place where the food plate is going to be put on</li>
            <li>The Ultrasonic sensors must be put on each food stand food container, can't be blocked by any object and should not be pointed towards any reflective surface </li>
            <li>The monitor for the Food Stand Display must be put in a position so it's easy for the users to look at it while taking food from the food containers</li>
            <li>All sensors and required cables can be fragile and susceptible to things like the water put under the food containers.</li>
        </ul>
        <h4>B. Create the Food Stand</h4>
        <ol>
            <li>Attach the Ultrassonic sensors on each food stand, without anything blocking it. The sensors must be able to "see" until the other side of the containers</li>
            <li>Connect each Ultrassonic sensor USB-shaped connector to the Sensors Board</li>
            <li>Connect the Sensors Board to the Raspberry Pi (see Schematics available in the table below)</li>
            <li>Attach the Load Cell (see our <a href="assets/images/prototype.png">prototype</a> for inspiration) and connect the HX711 module to it</li>
            <li>Connect the HX711 module to the Raspberry Pi (see Schematics available in the table below)</li>
        </ol>
    </div>

    <div id="software">
        <div class="title">
            <h3>2. Software Side</h3>
        </div>
        <h4>Deploying a Server and Database</h4>
            
            <h5>Deploying the Database</h5>
                <ol>
                    <li>Install MySQL Server 8.0 (instructions <a href=https://dev.mysql.com/doc/refman/8.0/en/installing.html>here</a>)</li>
                    <li>Using MySQL CLI, create the required user. Another user/password can be used but you'll have to change the Database Connection information in the file Server/server/database/DB_API.py, method connect. <br>
                        <ol>
                            <li>Run mysql -u root -p</li>
                            <li>On the CLI, run CREATE USER 'user'@'%' IDENTIFIED BY 'iotnutdb';<br>
                                GRANT ALL PRIVILEGES ON *.* TO 'user'@'%' WITH GRANT OPTION;<br>
                                FLUSH PRIVILEGES;<br>
                                EXIT;
                            </li>
                        </ol>                                                                                                                                           
                    </li>
                    <li>Using MySQL Workbench or CLI, run the provided script to create the Database. If you wish to remotely manage the database, use the previously created user and password and add the following lines to /etc/mysql/my.cnf:
                            <br><br>
                            [mysqld]
                            <br>
                            bind-address    = 0.0.0.0
                            <br>

                        Then run systemctl restart mysql</li>
                    
                </ol>

            <h5>Deploying the Server</h5>
                <ol>
                    <li>If not installed, install Python 3 and PIP3</li>
                    <li>On the Server/server folder, run pip/pip3 (the pip corresponding to the Python3 you have installed) -r requirements.txt. Administrator privileges might be needed.</li>
                    <li>To run the server, you can use screen if you want and then run the following command:  gunicorn -b 0.0.0.0:8000 server:app -n IoTNutritionServ', where the port 8000 can be changed by you by another you wish.<br>If gunicorn command is not found, run the command giving its full path (available in pip[3] show gunicorn)</li>
                </ol>

            <h4>Deploying a Canteen Control Unit</h4>
                <ol>
                    The Food Stand Controller should be by now with Raspbian installed.
                    <li>Connect the Canteen Control Unit to a network and activate/install (for example sudo apt install openssh-server) the SSH if you wish to process using SSH Connect the Canteen Control Unit to the same network as the CCU (University of Aveiro's internal network won't work).</li>
                    <li>If not installed, install Python 3 and PIP3.</li>
                    <li>On the SCI folder, run pip/pip3 (the pip corresponding to the Python3 you have installed) -r requirements.txt. Administrator privileges might be needed.</li>
                    <li>To run the Canteen Control Unit, run python3 SCI.py</li>
                </ol>

            <h4>Deploying a Food Stand Controller</h4>
            The Food Stand Controller should be by now with Raspbian installed and all the sensors attached, as described in the physical setup.
                <ol>
                    <li>Activate SPI, I2C and Remote GPIO interfaces on your Raspberry Pi. If you wish to proceed using SSH, also enable the SSH Interface. Connect the Food Stand Controller to the same network as the CCU (University of Aveiro's internal network won't work)</li>
                    <li>Download the StandUserInterface files</li>
                    <li>If not installed, install Python 3 and PIP3. Also install libjpeg-dev package using for example sudo apt-get install libjpeg8-dev</li>
                    <li>On the StandUserInterface folder, run pip/pip3 (the pip corresponding to the Python3 you have installed) -r requirements.txt. Administrator privileges might be needed. The installation might take a while.</li>
                    <li>To run the scripts responsible for the ID Reader, run python3 StandScripts/idReader.py  [IP Address of the CCU] [Number of Canteen] [Number of the Food Stand at the canteen]</li>
                    <li>To run the scripts responsible for the Weight Sensors, run python (must use python2) StandScripts/WeightScript.py [IP Address of the CCU] [Number of Canteen] [Number of the Food Stand at the canteen]</li>
                    <li>To run the scripts responsible for the Weight Sensors, run python3 StandScripts/HC_SR04.py [IP Address of the CCU] [Number of Canteen] [Number of the Food Stand at the canteen]</li>
                    <li>To run the interface, run python3 SUI.py [IP Address of the CCU]</li>
                </ol>
    </div>
</div>

<div id="details">
        <div class="title">
            <h2>Quickstart Info</h2>
            <h4>Please pay attention some links are not public (links for CodeUA files)</h4>
        </div>
                
        <!-- <div class="card-deck">
        
        </div> -->
        
        <div style="text-align: center">
        <a class="btn btn-round btn-info"  href="http://xcoa.av.it.pt/~pei2018-2019_g08/assets/docs/IoTNutrition_Developers_Documentation.pdf">IoT for Nutrition Developers Documentation</a>
        <br>Includes documentation for the Server and Database API and the Canteen Control Unit Modules
        </div>
        <br>
        <!--Table-->
        <table id="tablePreview" class="table" style="table-layout:fixed">
            <!--Table head-->
            <thead>
            <tr>
                <th>Category</th>
                <th>Component</th>
                <th>Details</th>
            </tr>
            </thead>
            
            <tbody>
                
            </tbody>
        </table>
        
        
    </div>
        


              
              <br>
              <a class="sidebar-nav-item" href="#" data-proofer-ignore><h5 data-toc-skip><i class="material-icons">arrow_upward</i> Return to Top</h5></a>
          </div>
           
      </div> 
    </div>
  </div>
</div>
 
  
  <!-- Footer -->
  <footer class="footer footer-default">
    <div class="container">
      <nav class="float-left">
        <ul>
          <li>
            <a> Smart Mirror - Make your life easier</a>
          </li>
        </ul>
      </nav>
      <div class="copyright float-right">
        &copy;
        <script>
          document.write(new Date().getFullYear())
        </script>, made with <i class="material-icons">favorite</i> by
        Jorge, Marcelo, Fábio, Paulo, Pedro.
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!--   Core JS Files   -->
  <script src="./assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
  <script src="./assets/js/plugins/moment.min.js"></script>
  <!--	Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
  <script src="./assets/js/plugins/bootstrap-datetimepicker.js" type="text/javascript"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="./assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDGat1sgDZ-3y6fFe6HD7QUziVC6jlJNog"></script>
  <!--	Plugin for Sharrre btn -->
  <script src="./assets/js/plugins/jquery.sharrre.js" type="text/javascript"></script>
  <!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
  <script src="./assets/js/material-kit.min.js?v=2.0.5" type="text/javascript"></script>
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  
  <!-- TOC -->
  <!-- add after bootstrap.min.css -->
  <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
  <!-- add after bootstrap.min.js -->
  <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script>

  <!-- Tooltips -->
  <script>
  $('a[data-toggle="tooltip"]').tooltip({
    animated: 'fade',
    placement: 'bottom',
    html: true
  });
  </script>
</body>

</html>
